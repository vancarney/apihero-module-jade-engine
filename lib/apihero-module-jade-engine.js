// Generated by CoffeeScript 1.9.3
var TemplateManager, _, browserify, path, router;

_ = require('lodash')._;

path = require('path');

router = require('apihero-module-jade-router');

browserify = require('apihero-module-browserify');

module.exports.browserify = browserify;

module.exports.jade = {};

_.each(router['jade'], (function(_this) {
  return function(fun, param) {
    return module.exports.jade[param] = fun;
  };
})(this));

module.exports.router = router;

module.exports.init = function(app, options, callback) {
  var defaults, tMan;
  defaults = {
    buildDir: path.join(app_root, 'build'),
    fileName: 'templates.js',
    templateDirectives: {}
  };
  this.options = _.extend({}, defaults, options);
  router.init(app, options, (function(_this) {
    return function() {
      return callback.apply(_this, arguments);
    };
  })(this));
  tMan = new TemplateManager;
  return app.once('ahero-modules-loaded', (function(_this) {
    return function() {
      _.each((_this.configs = app.ApiHero.getModuleConfigs()), function(config) {
        return console.log(tMan.processConfig(config));
      });
      return callback(null);
    };
  })(this));
};

TemplateManager = require('./TemplateManager');
